<template>
    <div class="">
        <canvas width="1050px" height="650px" id="ecg"></canvas>
    </div>
</template>

<script>
    import {mapState, mapMutations} from 'vuex'
    import API from '../../api/api_ecg_view';
    export default {
        name: 'EcgViewChart',
        data() {
            return {
                data: [-0.262, -0.325, -0.392, -0.459, -0.504, -0.52, -0.528, -0.528, -0.521, -0.51, -0.497, -0.479, -0.463, -0.442, -0.413, -0.391, -0.376, -0.362, -0.346, -0.327, -0.305, -0.286, -0.277, -0.271, -0.266, -0.262, -0.259, -0.256, -0.255, -0.255, -0.256, -0.258, -0.261, -0.265, -0.269, -0.274, -0.279, -0.286, -0.302, -0.315, -0.323, -0.329, -0.335, -0.34, -0.342, -0.343, -0.342, -0.34, -0.338, -0.336, -0.333, -0.33, -0.326, -0.322, -0.317, -0.31, -0.286, -0.228, -0.145, -0.035, 0.064, 0.066, 0.014, -0.032, -0.113, -0.216, -0.302, -0.385, -0.48, -0.565, -0.616, -0.617, -0.566, -0.437, -0.407, -0.392, -0.388, -0.386, -0.385, -0.385, -0.384, -0.383, -0.382, -0.381, -0.381, -0.381, -0.379, -0.378, -0.378, -0.376, -0.374, -0.372, -0.37, -0.367, -0.364, -0.36, -0.356, -0.349, -0.34, -0.332, -0.324, -0.316, -0.309, -0.302, -0.294, -0.286, -0.277, -0.268, -0.26, -0.251, -0.242, -0.234, -0.227, -0.22, -0.21, -0.198, -0.186, -0.176, -0.168, -0.161, -0.154, -0.146, -0.138, -0.128, -0.116, -0.102, -0.089, -0.076, -0.07, -0.065, -0.061, -0.057, -0.054, -0.051, -0.049, -0.047, -0.046, -0.045, -0.045, -0.046, -0.048, -0.05, -0.054, -0.057, -0.062, -0.066, -0.071, -0.075, -0.08, -0.089, -0.098, -0.106, -0.112, -0.118, -0.122, -0.126, -0.129, -0.133, -0.135, -0.137, -0.138, -0.139, -0.138, -0.136, -0.132, -0.127, -0.122, -0.116, -0.111, -0.106, -0.101, -0.096, -0.091, -0.086, -0.081, -0.077, -0.073, -0.07, -0.068, -0.066, -0.063, -0.06, -0.055, -0.047, -0.039, -0.028, -0.017, -0.01, -0.004, 0.0, 0.005, 0.009, 0.013, 0.016, 0.019, 0.021, 0.023, 0.024, 0.025, 0.025, 0.025, 0.025, 0.025, 0.024, 0.024, 0.024, 0.024, 0.025, 0.025, 0.026, 0.026, 0.026, 0.026, 0.026, 0.026, 0.026, 0.027, 0.027, 0.028, 0.03, 0.031, 0.033, 0.035, 0.037, 0.039, 0.041, 0.042, 0.044, 0.045, 0.046, 0.047, 0.049, 0.05, 0.052, 0.054, 0.056, 0.059, 0.061, 0.064, 0.066, 0.069, 0.073, 0.077, 0.082, 0.087, 0.093, 0.103, 0.112, 0.118, 0.123, 0.126, 0.13, 0.133, 0.136, 0.138, 0.139, 0.135, 0.128, 0.119, 0.11, 0.104, 0.098, 0.091, 0.085, 0.079, 0.073, 0.068, 0.064, 0.06, 0.057, 0.054, 0.051, 0.046, 0.04, 0.034, 0.032, 0.035, 0.041, 0.05, 0.078, 0.132, 0.209, 0.306, 0.415, 0.486, 0.512, 0.513, 0.493, 0.438, 0.359, 0.272, 0.177, 0.076, -0.012, -0.069, -0.088, -0.074, -0.054, -0.037, -0.03, -0.028, -0.026, -0.026, -0.025, -0.024, -0.023, -0.021, -0.018, -0.015, -0.011, -0.008, -0.004, 0.0, 0.003, 0.006, 0.01, 0.013, 0.016, 0.019, 0.022, 0.025, 0.028, 0.031, 0.034, 0.037, 0.04, 0.042, 0.043, 0.045, 0.047, 0.049, 0.051, 0.054, 0.059, 0.066, 0.076, 0.085, 0.096, 0.106, 0.117, 0.127, 0.137, 0.143, 0.146, 0.147, 0.148, 0.149, 0.15, 0.151, 0.152, 0.153, 0.154, 0.154, 0.153, 0.151, 0.148, 0.144, 0.138, 0.132, 0.124, 0.111, 0.099, 0.086, 0.074, 0.064, 0.054, 0.044, 0.033, 0.023, 0.012, 0.001, -0.009, -0.019, -0.026, -0.033, -0.038, -0.043, -0.047, -0.051, -0.053, -0.055, -0.057, -0.06, -0.062, -0.064, -0.066, -0.067, -0.069, -0.07, -0.072, -0.072, -0.073, -0.074, -0.074, -0.075, -0.075, -0.074, -0.072, -0.07, -0.067, -0.065, -0.062, -0.058, -0.054, -0.05, -0.046, -0.044, -0.041, -0.039, -0.037, -0.034, -0.033, -0.031, -0.03, -0.029, -0.027, -0.026, -0.025, -0.024, -0.023, -0.022, -0.021, -0.02, -0.019, -0.02, -0.02, -0.021, -0.022, -0.022, -0.022, -0.022, -0.022, -0.022, -0.021, -0.02, -0.02, -0.019, -0.019, -0.018, -0.018, -0.018, -0.017, -0.017, -0.017, -0.016, -0.015, -0.014, -0.012, -0.011, -0.01, -0.008, -0.007, -0.005, -0.004, -0.002, 0.0, 0.002, 0.006, 0.011, 0.015, 0.02, 0.024, 0.029, 0.035, 0.041, 0.047, 0.053, 0.06, 0.066, 0.072, 0.077, 0.082, 0.086, 0.09, 0.093, 0.095, 0.096, 0.094, 0.09, 0.084, 0.076, 0.069, 0.061, 0.053, 0.044, 0.036, 0.03, 0.024, 0.018, 0.013, 0.008, 0.003, 0.0, -0.005, -0.008, -0.012, -0.015, -0.019, -0.026, -0.035, -0.036, -0.026, 0.0, 0.053, 0.135, 0.247, 0.384, 0.54, 0.668, 0.728, 0.687, 0.539, 0.319, 0.077, -0.109, -0.197, -0.208, -0.173, -0.11, -0.08, -0.076, -0.072, -0.069, -0.067, -0.066, -0.065, -0.064, -0.063, -0.062, -0.062, -0.063, -0.064, -0.064, -0.063, -0.062, -0.06, -0.059, -0.057, -0.055, -0.053, -0.051, -0.049, -0.049, -0.048, -0.047, -0.046, -0.044, -0.043, -0.041, -0.039, -0.038, -0.036, -0.034, -0.032, -0.03, -0.029, -0.027, -0.026, -0.024, -0.023, -0.021, -0.018, -0.014, -0.009, -0.003, 0.007, 0.019, 0.031, 0.042, 0.048, 0.053, 0.058, 0.062, 0.066, 0.069, 0.071, 0.073, 0.075, 0.076, 0.076, 0.075, 0.073, 0.07, 0.067, 0.063, 0.058, 0.053, 0.048, 0.043, 0.036, 0.022, 0.009, 0.0, -0.008, -0.016, -0.022, -0.028, -0.033, -0.039, -0.046, -0.052, -0.056, -0.059, -0.062, -0.064, -0.066, -0.068, -0.07, -0.072, -0.073, -0.075, -0.076, -0.077, -0.077, -0.078, -0.078, -0.078, -0.077, -0.077, -0.075, -0.074, -0.073, -0.071, -0.069, -0.066, -0.064, -0.062, -0.061, -0.06, -0.059, -0.058, -0.056, -0.055, -0.054, -0.052, -0.05, -0.047, -0.043, -0.039, -0.036, -0.034, -0.033, -0.033, -0.033, -0.034, -0.034, -0.035, -0.036, -0.036, -0.035, -0.034, -0.033, -0.032, -0.031, -0.029, -0.027, -0.024, -0.021, -0.017, -0.012, -0.005, 0.007, 0.038, 0.053, 0.058, 0.063, 0.066, 0.069, 0.071, 0.072, 0.074, 0.075, 0.077, 0.079, 0.081, 0.082, 0.083, 0.084, 0.085, 0.087, 0.088, 0.089, 0.091, 0.094, 0.098, 0.106, 0.115, 0.125, 0.134, 0.14, 0.145, 0.15, 0.154, 0.157, 0.159, 0.161, 0.162, 0.162, 0.161, 0.159, 0.155, 0.151, 0.146, 0.141, 0.134, 0.126, 0.11, 0.092, 0.073, 0.061, 0.051, 0.042, 0.035, 0.03, 0.027, 0.025, 0.023, 0.022, 0.021, 0.018, 0.015, 0.013, 0.013, 0.019, 0.031, 0.066, 0.126, 0.212, 0.329, 0.469, 0.617, 0.728, 0.743, 0.702, 0.533, 0.301, 0.066, -0.109, -0.175, -0.179, -0.129, -0.083, -0.073, -0.065, -0.061, -0.057, -0.054, -0.052, -0.049, -0.047, -0.044, -0.043, -0.041, -0.041, -0.041, -0.04, -0.039, -0.039, -0.038, -0.037, -0.036, -0.034, -0.033, -0.032, -0.031, -0.03, -0.029, -0.028, -0.027, -0.025, -0.024, -0.022, -0.021, -0.019, -0.017, -0.015, -0.012, -0.01, -0.007, -0.004, 0.0, 0.003, 0.007, 0.012, 0.016, 0.021, 0.025, 0.03, 0.035, 0.041, 0.048, 0.058, 0.067, 0.074, 0.079, 0.084, 0.087, 0.09, 0.092, 0.094, 0.096, 0.097, 0.098, 0.098, 0.097, 0.096, 0.093, 0.089, 0.085, 0.079, 0.073, 0.064, 0.049, 0.037, 0.026, 0.016, 0.007, 0.0, -0.008, -0.015, -0.023, -0.032, -0.042, -0.051, -0.056, -0.06, -0.063, -0.066, -0.069, -0.071, -0.073, -0.074, -0.075, -0.075, -0.076, -0.077, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.078, -0.077, -0.076, -0.075, -0.074, -0.074, -0.073, -0.072, -0.071, -0.071, -0.07, -0.07, -0.07, -0.07, -0.07, -0.07, -0.07, -0.07, -0.069, -0.069, -0.069, -0.069, -0.069, -0.069, -0.069, -0.069, -0.07, -0.07, -0.071, -0.071, -0.072, -0.072, -0.071, -0.071, -0.071, -0.071, -0.071, -0.07, -0.069, -0.068, -0.067, -0.067, -0.066, -0.066, -0.065, -0.063, -0.062, -0.061, -0.058, -0.052, -0.043, -0.036, -0.028, -0.018, -0.005, 0.008, 0.019, 0.028, 0.036, 0.046, 0.056, 0.064, 0.072, 0.079, 0.083, 0.086, 0.088, 0.09, 0.091, 0.093, 0.096, 0.097, 0.097, 0.094, 0.089, 0.083, 0.074, 0.061, 0.046, 0.031, 0.015, 0.002, -0.006, -0.012, -0.016, -0.02, -0.024, -0.029, -0.033, -0.039, -0.045, -0.053, -0.06, -0.06, -0.055, -0.045, -0.015, 0.048, 0.136, 0.254, 0.395, 0.544, 0.668, 0.716, 0.663, 0.499, 0.26, 0.008, -0.182, -0.264, -0.268, -0.21, -0.127, -0.089, -0.075, -0.074, -0.077, -0.079, -0.081, -0.082, -0.082, -0.076, -0.071, -0.068, -0.066, -0.065, -0.065, -0.063, -0.062, -0.06, -0.058, -0.056, -0.054, -0.052, -0.05, -0.048, -0.047, -0.045, -0.042, -0.04, -0.037, -0.033, -0.029, -0.025, -0.021, -0.016, -0.012, -0.008, -0.004, 0.0, 0.003, 0.009, 0.016, 0.023, 0.028, 0.033, 0.037, 0.043, 0.05, 0.057, 0.065, 0.074, 0.086, 0.101, 0.115, 0.134, 0.157, 0.168, 0.173, 0.177, 0.18, 0.182, 0.184, 0.184, 0.184, 0.182, 0.18, 0.176, 0.172, 0.167, 0.159, 0.144, 0.13, 0.113, 0.091, 0.076, 0.066, 0.056, 0.047, 0.038, 0.028, 0.02, 0.014, 0.007, 0.002, -0.003, -0.009, -0.015, -0.017, -0.018, -0.019, -0.02, -0.021, -0.022, -0.023, -0.024, -0.025, -0.026, -0.027, -0.027, -0.028, -0.028, -0.027, -0.027, -0.026, -0.026, -0.025, -0.025, -0.024, -0.023, -0.022, -0.021, -0.021, -0.02, -0.019, -0.018, -0.018, -0.017, -0.017, -0.016, -0.016, -0.015, -0.015, -0.015, -0.015, -0.015, -0.015, -0.015, -0.015, -0.016, -0.017, -0.017, -0.017, -0.017, -0.018, -0.018, -0.019, -0.02, -0.021, -0.021, -0.021, -0.022, -0.023, -0.024, -0.025, -0.026, -0.026, -0.027, -0.028, -0.03, -0.031, -0.032, -0.032, -0.032, -0.034, -0.037, -0.04, -0.041, -0.04, -0.036, -0.031, -0.026, -0.021, -0.017, -0.013, -0.008, -0.005, -0.002, 0.0, 0.001, 0.004, 0.007, 0.014, 0.024, 0.034, 0.044, 0.05, 0.053, 0.057, 0.059, 0.059, 0.054, 0.047, 0.034, 0.018, 0.007, 0.0, -0.008, -0.019, -0.033, -0.045, -0.054, -0.064, -0.071, -0.075, -0.079, -0.082, -0.084, -0.085, -0.088, -0.09, -0.091, -0.088, -0.081, -0.061, -0.024, 0.034, 0.121, 0.236, 0.372, 0.503, 0.589, 0.594, 0.533, 0.355, 0.124, -0.097, -0.258, -0.319, -0.292, -0.214, -0.135, -0.104, -0.094, -0.105, -0.117, -0.127, -0.127, -0.116, -0.11, -0.107, -0.105, -0.102, -0.101, -0.099, -0.098, -0.096, -0.094, -0.092, -0.09, -0.089, -0.087, -0.086, -0.085, -0.082, -0.079, -0.074, -0.07, -0.066, -0.062, -0.058, -0.053, -0.048, -0.043, -0.037, -0.033, -0.03, -0.027, -0.024, -0.021, -0.019, -0.017, -0.014, -0.01, -0.002, 0.006, 0.015, 0.024, 0.035, 0.043, 0.051, 0.058, 0.065, 0.071, 0.076, 0.081, 0.086, 0.092, 0.099, 0.107, 0.113, 0.118, 0.121, 0.125, 0.128, 0.128, 0.123, 0.116, 0.107, 0.096, 0.086, 0.074, 0.058, 0.044, 0.034, 0.024, 0.015, 0.006, -0.004, -0.019, -0.036, -0.05, -0.06, -0.064, -0.065, -0.066, -0.067, -0.068, -0.068, -0.069, -0.069, -0.069, -0.069, -0.07, -0.07, -0.07, -0.07, -0.07, -0.069, -0.069, -0.069, -0.068, -0.068, -0.068, -0.067, -0.067, -0.066, -0.065, -0.064, -0.063, -0.061, -0.06, -0.058, -0.056, -0.055, -0.052, -0.044, -0.036, -0.028, -0.025, -0.024, -0.022, -0.02, -0.018, -0.017, -0.015, -0.014, -0.013, -0.012, -0.011, -0.01, -0.01, -0.01, -0.01, -0.009, -0.009, -0.01, -0.01, -0.011, -0.011, -0.012, -0.012, -0.012, -0.013, -0.015, -0.016, -0.016, -0.017, -0.017, -0.018, -0.019, -0.02, -0.021, -0.022, -0.022, -0.024, -0.026, -0.028, -0.029, -0.029, -0.028, -0.026, -0.023, -0.019, -0.012, 0.001, 0.012, 0.019, 0.026, 0.032, 0.04, 0.048, 0.056, 0.061, 0.065, 0.068, 0.07, 0.071, 0.07, 0.068, 0.064, 0.06, 0.055, 0.046, 0.039, 0.028, 0.015, 0.004, -0.003, -0.012, -0.02, -0.025, -0.031, -0.036, -0.04, -0.044, -0.048, -0.051, -0.055, -0.058, -0.061, -0.065, -0.072, -0.067, -0.053, -0.015, 0.044, 0.133, 0.253, 0.399, 0.542, 0.638, 0.645, 0.584, 0.409, 0.176, -0.042, -0.205, -0.263, -0.236, -0.163, -0.091, -0.062, -0.053, -0.06, -0.063, -0.065, -0.066, -0.067, -0.068, -0.069, -0.07, -0.071, -0.072, -0.073, -0.074, -0.074, -0.074, -0.073, -0.072, -0.072, -0.071, -0.07, -0.069, -0.068, -0.066, -0.064, -0.062, -0.058, -0.048, -0.039, -0.034, -0.031, -0.028, -0.026, -0.023, -0.02, -0.018, -0.016, -0.013, -0.008, 0.0, 0.008, 0.021, 0.035, 0.045, 0.053, 0.061, 0.07, 0.085, 0.096, 0.102, 0.107, 0.112, 0.118, 0.125, 0.134, 0.139, 0.141, 0.143, 0.144, 0.146, 0.146, 0.146, 0.145, 0.142, 0.138, 0.133, 0.123, 0.107, 0.097, 0.089, 0.081, 0.071, 0.055, 0.043, 0.036, 0.03, 0.025, 0.021, 0.016, 0.008, 0.0, -0.005, -0.009, -0.012, -0.015, -0.019, -0.021, -0.024, -0.026, -0.028, -0.03, -0.032, -0.033, -0.035, -0.035, -0.036, -0.037, -0.038, -0.039, -0.04, -0.041, -0.042, -0.043, -0.044, -0.046, -0.047, -0.047, -0.047, -0.045, -0.041, -0.038, -0.034, -0.031, -0.028, -0.024, -0.021, -0.018, -0.015, -0.012, -0.01, -0.01, -0.009, -0.009, -0.009, -0.009, -0.009, -0.009, -0.009, -0.01, -0.01, -0.01, -0.01, -0.01, -0.011, -0.011, -0.011, -0.012, -0.012, -0.013, -0.013, -0.014, -0.015, -0.015, -0.016, -0.016, -0.017, -0.017, -0.017, -0.018, -0.018, -0.018, -0.018, -0.017, -0.016, -0.016, -0.014, -0.013, -0.012, -0.01, -0.008, -0.006, -0.003, 0.0, 0.006, 0.013, 0.018, 0.023, 0.03, 0.039, 0.047, 0.052, 0.055, 0.058, 0.06, 0.061, 0.061, 0.059, 0.056, 0.052, 0.047, 0.039, 0.027, 0.015, 0.001, -0.016, -0.027, -0.033, -0.039, -0.045, -0.05, -0.055, -0.058, -0.062, -0.065, -0.069, -0.073, -0.077, -0.082, -0.09, -0.094, -0.092, -0.086, -0.069, -0.031, 0.032, 0.122, 0.243, 0.392, 0.543, 0.655, 0.684, 0.607, 0.43, 0.19, -0.04, -0.214, -0.275, -0.277, -0.224, -0.153, -0.121, -0.111, -0.105, -0.103, -0.104, -0.106, -0.108, -0.11, -0.111, -0.113, -0.114, -0.115, -0.114, -0.112, -0.109, -0.107, -0.104, -0.102, -0.099, -0.095, -0.092, -0.089, -0.087, -0.084, -0.082, -0.079, -0.075, -0.071, -0.065, -0.061, -0.058, -0.055, -0.053, -0.05, -0.048, -0.046, -0.044, -0.042, -0.039, -0.036, -0.033, -0.03, -0.026, -0.022, -0.015, -0.008, -0.003, 0.0, 0.004, 0.011, 0.019, 0.028, 0.034, 0.039, 0.043, 0.045, 0.047, 0.048, 0.05, 0.051, 0.053, 0.054, 0.054, 0.054, 0.053, 0.05, 0.047, 0.043, 0.037, 0.026, 0.013, 0.002, -0.007, -0.014, -0.018, -0.025, -0.037, -0.047, -0.052, -0.055, -0.058, -0.061, -0.063, -0.064, -0.065, -0.067, -0.068, -0.069, -0.07, -0.071, -0.071, -0.071, -0.071, -0.071, -0.071, -0.07, -0.069, -0.067, -0.065, -0.063, -0.061, -0.06, -0.058, -0.056, -0.053, -0.051, -0.049, -0.046, -0.044, -0.041, -0.039, -0.035, -0.031, -0.028, -0.025, -0.022, -0.018, -0.012, -0.004, 0.002, 0.007, 0.018, 0.025, 0.026, 0.027, 0.029, 0.032, 0.038, 0.054, 0.085, 0.116, 0.143, 0.165, 0.187, 0.212, 0.237, 0.247, 0.247, 0.238, 0.224, 0.214, 0.211, 0.21, 0.208, 0.205, 0.2, 0.185, 0.158, 0.127, 0.098, 0.072, 0.049, 0.026, 0.0, -0.02, -0.029, -0.032, -0.029, -0.023, -0.016, -0.01, -0.005, 0.0, 0.006, 0.018, 0.029, 0.038, 0.048, 0.056, 0.062, 0.067, 0.072, 0.075, 0.078, 0.081, 0.083, 0.085, 0.086, 0.086, 0.085, 0.083, 0.08, 0.076, 0.069, 0.054, 0.037, 0.02, 0.006, -0.004, -0.015, -0.021, -0.025, -0.028, -0.03, -0.033, -0.035, -0.037, -0.039, -0.042, -0.046, -0.052, -0.052, -0.042, -0.016, 0.031, 0.1, 0.191, 0.304, 0.427, 0.539, 0.608, 0.613, 0.569, 0.432, 0.243, 0.04, -0.119, -0.2, -0.211, -0.181, -0.126, -0.096, -0.088, -0.083, -0.081, -0.08, -0.079, -0.078, -0.075, -0.079, -0.093, -0.101, -0.087, -0.046, 0.024, 0.109, 0.191, 0.256, 0.304, 0.339, 0.353, 0.358, 0.35, 0.341, 0.334, 0.333, 0.338, 0.344, 0.349, 0.336, 0.3, 0.25, 0.197, 0.142, 0.087, 0.033, -0.023, -0.082, -0.127, -0.142, -0.136, -0.125, -0.113, -0.105, -0.1, -0.094, -0.088, -0.079, -0.065, -0.056, -0.05, -0.043, -0.037, -0.027, -0.013, -0.005, -0.001, 0.0, 0.002, 0.004, 0.005, 0.005, 0.005, 0.005, 0.004, 0.002, 0.0, -0.002, -0.005, -0.01, -0.02, -0.029, -0.038, -0.047, -0.055, -0.064, -0.072, -0.081, -0.089, -0.097, -0.106, -0.11, -0.112, -0.114, -0.116, -0.118, -0.12, -0.122, -0.123, -0.123, -0.123, -0.123, -0.123, -0.122, -0.122, -0.12, -0.119, -0.116, -0.113, -0.11, -0.094, -0.062, -0.032, -0.001, 0.015, 0.045, 0.072, 0.106, 0.117, 0.121, 0.124, 0.118, 0.112, 0.109, 0.106, 0.102, 0.099, 0.095, 0.082, 0.053, 0.022, 0.003, -0.017, -0.037, -0.057, -0.075, -0.087, -0.096, -0.097, -0.093, -0.091, -0.09, -0.09, -0.09, -0.089, -0.089, -0.089, -0.089, -0.089, -0.089, -0.089, -0.09, -0.091, -0.092, -0.093, -0.093, -0.094, -0.094, -0.094, -0.094, -0.095, -0.095, -0.094, -0.094, -0.093, -0.092, -0.091, -0.09, -0.089, -0.087, -0.086, -0.084, -0.082, -0.08, -0.078, -0.075, -0.072, -0.067, -0.061, -0.055, -0.05, -0.045, -0.04, -0.035, -0.031, -0.027, -0.023, -0.021, -0.02, -0.019, -0.018, -0.015, -0.012, -0.013, -0.026, -0.041, -0.054, -0.046, -0.02, 0.02, 0.063, 0.1, 0.128, 0.157, 0.191, 0.231, 0.253, 0.26, 0.246, 0.223, 0.198, 0.181, 0.171, 0.162, 0.154, 0.145, 0.136, 0.135, 0.144, 0.167, 0.214, 0.285, 0.367, 0.447, 0.478, 0.443, 0.314, 0.112, -0.122, -0.317, -0.411, -0.418, -0.364, -0.279, -0.248, -0.24, -0.235, -0.231, -0.226, -0.222, -0.218, -0.214, -0.21, -0.206, -0.203, -0.2, -0.197, -0.195, -0.191, -0.186, -0.179, -0.168, -0.161, -0.156, -0.154, -0.152, -0.15, -0.148, -0.147, -0.145, -0.143, -0.141, -0.139, -0.137, -0.135, -0.133, -0.13, -0.126, -0.119, -0.113, -0.106, -0.1, -0.094, -0.088, -0.081, -0.075, -0.067, -0.058, -0.046, -0.036, -0.028, -0.022, -0.013, -0.001, 0.008, 0.016, 0.023, 0.028, 0.032, 0.035, 0.038, 0.04, 0.042, 0.044, 0.045, 0.046, 0.046, 0.045, 0.042, 0.039, 0.036, 0.032, 0.027, 0.019, 0.006, -0.001, -0.005, -0.007, -0.009, -0.01, -0.012, -0.013, -0.013, -0.013, -0.013, -0.012, -0.01, -0.007, -0.004, -0.001, 0.001, 0.004, 0.007, 0.009, 0.011, 0.012, 0.014, 0.015, 0.016, 0.017, 0.019, 0.02, 0.02, 0.021, 0.022, 0.022, 0.023, 0.023, 0.023, 0.023, 0.023, 0.023, 0.024, 0.024, 0.023, 0.022, 0.022, 0.021, 0.02, 0.019, 0.018, 0.017, 0.015, 0.014, 0.013, 0.012, 0.012, 0.011, 0.01, 0.01, 0.009, 0.009, 0.008, 0.007, 0.005, 0.003, 0.001, 0.0, -0.002, -0.004, -0.005, -0.007, -0.008, -0.009, -0.009, -0.008, -0.007, -0.006, -0.006, -0.004, -0.003, -0.002, 0.0, 0.001, 0.002, 0.004, 0.006, 0.009, 0.015, 0.021, 0.027, 0.032, 0.038, 0.043, 0.048, 0.054, 0.059, 0.064, 0.068, 0.073, 0.077, 0.082, 0.087, 0.092, 0.097, 0.103, 0.107, 0.111, 0.115, 0.119, 0.122, 0.125, 0.129, 0.131, 0.132, 0.131, 0.127, 0.123, 0.117, 0.109, 0.095, 0.082, 0.069, 0.056, 0.043, 0.035, 0.031, 0.027, 0.024, 0.021, 0.018, 0.015, 0.011, 0.006, 0.001, -0.007, -0.02, -0.022, -0.013, 0.01, 0.066, 0.146, 0.251, 0.379, 0.524, 0.643, 0.707, 0.675, 0.55, 0.342, 0.109, -0.095, -0.206, -0.224, -0.206, -0.14, -0.088, -0.063, -0.056, -0.053, -0.05, -0.048, -0.047, -0.046, -0.046, -0.044, -0.044, -0.043, -0.043, -0.041, -0.041, -0.04, -0.039, -0.037, -0.036, -0.034, -0.032, -0.03, -0.028, -0.027, -0.025, -0.024, -0.023, -0.022, -0.021, -0.018, -0.016, -0.013, -0.011, -0.009, -0.007, -0.005, -0.003, -0.002, 0.0, 0.001, 0.003, 0.006, 0.012, 0.019, 0.026, 0.034, 0.041, 0.047, 0.053, 0.06, 0.066, 0.073, 0.079, 0.086, 0.094, 0.101, 0.105, 0.108, 0.11, 0.112, 0.114, 0.116, 0.118, 0.119, 0.119, 0.117, 0.113, 0.108, 0.102, 0.092, 0.077, 0.065, 0.054, 0.043, 0.032, 0.018, 0.002, -0.009, -0.018, -0.03, -0.035, -0.038, -0.04, -0.042, -0.044, -0.046, -0.047, -0.049, -0.05, -0.051, -0.051, -0.051, -0.051, -0.051, -0.051, -0.05, -0.049, -0.048, -0.047, -0.045, -0.044, -0.042, -0.041, -0.039, -0.038, -0.036, -0.035, -0.033, -0.032, -0.031, -0.03, -0.029, -0.028, -0.026, -0.025, -0.024, -0.022, -0.021, -0.02, -0.019, -0.018, -0.017, -0.017, -0.017, -0.018, -0.018, -0.018, -0.019, -0.019, -0.019, -0.02, -0.02, -0.019, -0.019, -0.019, -0.019, -0.019, -0.02, -0.022, -0.023, -0.024, -0.023, -0.021, -0.019, -0.017, -0.013, -0.01, -0.01, -0.013, -0.016, -0.018, -0.02, -0.021, -0.023, -0.024, -0.025, -0.026, -0.027, -0.027, -0.026, -0.025, -0.022, -0.02, -0.017, -0.013, -0.009, -0.003, 0.003, 0.009, 0.015, 0.021, 0.026, 0.032, 0.038, 0.044, 0.048, 0.051, 0.054, 0.056, 0.058, 0.06, 0.06, 0.058, 0.056, 0.052, 0.047, 0.042, 0.03, 0.01, -0.001, -0.011, -0.025, -0.032, -0.037, -0.041, -0.045, -0.048, -0.05, -0.053, -0.055, -0.057, -0.059, -0.062, -0.066, -0.072, -0.076, -0.073, -0.066, -0.049, -0.006, 0.06, 0.155, 0.28, 0.427, 0.559, 0.629, 0.603, 0.474, 0.267, 0.029, -0.166, -0.264, -0.276, -0.235, -0.16, -0.133, -0.127, -0.123, -0.12, -0.118, -0.116, -0.115, -0.112, -0.109, -0.107, -0.105, -0.103, -0.103, -0.102, -0.101, -0.099, -0.095, -0.091, -0.087, -0.084, -0.08, -0.076, -0.072, -0.068, -0.064, -0.061, -0.058, -0.056, -0.053, -0.05, -0.048, -0.047, -0.045, -0.043, -0.04, -0.037, -0.034, -0.031, -0.028, -0.025, -0.021, -0.017, -0.012, -0.003, 0.006, 0.016, 0.027, 0.038, 0.052, 0.071, 0.082, 0.088, 0.092, 0.096, 0.1, 0.103, 0.106, 0.108, 0.111, 0.113, 0.115, 0.117, 0.117, 0.116, 0.114, 0.112, 0.108, 0.104, 0.098, 0.087, 0.077, 0.067, 0.057, 0.046, 0.038, 0.031, 0.025, 0.02, 0.015, 0.009, 0.001, -0.007, -0.013, -0.016, -0.019, -0.022, -0.025, -0.028, -0.031, -0.032, -0.034, -0.036, -0.038, -0.04, -0.04, -0.04, -0.039, -0.037, -0.036, -0.035, -0.034, -0.033, -0.032, -0.03, -0.029, -0.028, -0.028, -0.027, -0.027, -0.026, -0.025, -0.024, -0.024, -0.024, -0.024, -0.023, -0.022, -0.021, -0.02, -0.02, -0.019, -0.019, -0.019, -0.018, -0.018, -0.019, -0.02, -0.021, -0.021, -0.022, -0.022, -0.023, -0.024, -0.024, -0.024, -0.024, -0.025, -0.026, -0.027, -0.028, -0.029, -0.029, -0.028, -0.028, -0.027, -0.026, -0.025, -0.025, -0.024, -0.023, -0.022, -0.022, -0.021, -0.021, -0.021, -0.021, -0.02, -0.02, -0.019, -0.019, -0.019, -0.018, -0.017, -0.015, -0.014, -0.012, -0.01, -0.007, -0.003, 0.002, 0.006, 0.01, 0.013, 0.019, 0.027, 0.033, 0.042, 0.053, 0.059, 0.062, 0.065, 0.066, 0.066, 0.064, 0.059, 0.053, 0.042, 0.025, 0.011, -0.002, -0.014, -0.023, -0.033, -0.044, -0.054, -0.062, -0.066, -0.069, -0.071, -0.073, -0.075, -0.077, -0.079, -0.081, -0.084, -0.089, -0.089, -0.08, -0.056, -0.004, 0.075, 0.19, 0.33, 0.488, 0.621, 0.692, 0.66, 0.534, 0.319, 0.068, -0.144, -0.268, -0.296, -0.246, -0.176, -0.139, -0.13, -0.124, -0.12, -0.117, -0.115, -0.113, -0.111, -0.109, -0.107, -0.106, -0.105, -0.104, -0.104, -0.103, -0.101, -0.098, -0.095, -0.092, -0.089, -0.086, -0.084, -0.081, -0.079, -0.077, -0.075, -0.073, -0.072, -0.07, -0.069, -0.068, -0.066, -0.063, -0.059, -0.052, -0.045, -0.041, -0.038, -0.036, -0.034, -0.031, -0.028, -0.024, -0.018, -0.008, 0.0, 0.012, 0.028, 0.04, 0.05, 0.058, 0.063, 0.067, 0.069, 0.07, 0.072, 0.073, 0.073, 0.073, 0.074, 0.074, 0.074, 0.075, 0.076, 0.076, 0.076, 0.073, 0.068, 0.06, 0.048, 0.036, 0.022, 0.011, 0.004, -0.002, -0.008, -0.013, -0.017, -0.02, -0.023, -0.025, -0.027, -0.029, -0.032, -0.038, -0.049, -0.054, -0.056, -0.059, -0.06, -0.061, -0.061, -0.061, -0.059, -0.058, -0.056, -0.055, -0.053, -0.052, -0.05, -0.048, -0.046, -0.044, -0.042, -0.039, -0.037, -0.034, -0.032, -0.03, -0.027, -0.025, -0.022, -0.02, -0.018, -0.017, -0.016, -0.015, -0.015, -0.014, -0.014, -0.014, -0.014, -0.014, -0.013, -0.012, -0.011, -0.011, -0.011, -0.01, -0.01, -0.01, -0.01, -0.011, -0.011, -0.012, -0.012, -0.012, -0.013, -0.013, -0.013, -0.013, -0.013, -0.014, -0.014, -0.014, -0.014, -0.015, -0.015, -0.016, -0.016, -0.017, -0.017, -0.017, -0.018, -0.02, -0.019, -0.01, -0.005, 0.0, 0.002, 0.006, 0.008, 0.011, 0.014, 0.017, 0.022, 0.026, 0.03, 0.033, 0.039, 0.046, 0.053, 0.061, 0.075, 0.084, 0.09, 0.093, 0.096, 0.097, 0.098, 0.1, 0.103, 0.103, 0.095, 0.085, 0.07, 0.057, 0.048, 0.04, 0.031, 0.018, 0.005, -0.007, -0.014, -0.017, -0.019, -0.021, -0.024, -0.027, -0.03, -0.033, -0.037, -0.044, -0.047, -0.045, -0.037, -0.015, 0.037, 0.119, 0.233, 0.374, 0.535, 0.676, 0.754, 0.728, 0.593, 0.369, 0.111, -0.109, -0.23, -0.257, -0.207, -0.135, -0.082, -0.069, -0.068, -0.068, -0.068, -0.067, -0.067, -0.066, -0.065, -0.063, -0.061, -0.059, -0.057, -0.055, -0.053, -0.052, -0.051, -0.05, -0.048, -0.046, -0.044, -0.042, -0.04, -0.039, -0.037, -0.036, -0.034, -0.032, -0.03, -0.028, -0.024, -0.02, -0.016, -0.013, -0.009, -0.006, -0.002, 0.0, 0.003, 0.007, 0.01, 0.014, 0.018, 0.023, 0.029, 0.034, 0.038, 0.043, 0.049, 0.055, 0.062, 0.072, 0.079, 0.085, 0.09, 0.094, 0.099, 0.104, 0.107, 0.11, 0.113, 0.115, 0.116, 0.116, 0.115, 0.113, 0.109, 0.106, 0.1, 0.09, 0.082, 0.074, 0.065, 0.057, 0.046, 0.033, 0.021, 0.013, 0.004, -0.003, -0.01, -0.015, -0.02, -0.023, -0.025, -0.027, -0.029, -0.031, -0.032, -0.033, -0.033, -0.034, -0.034, -0.034, -0.034, -0.035, -0.035, -0.035, -0.035, -0.036, -0.037, -0.038, -0.039, -0.039, -0.038, -0.038, -0.037, -0.035, -0.034, -0.033, -0.031, -0.029, -0.028, -0.028, -0.027, -0.027, -0.026, -0.025, -0.025, -0.024, -0.023, -0.022, -0.021, -0.02, -0.02, -0.02, -0.02, -0.021, -0.023, -0.024, -0.026, -0.028, -0.031, -0.034, -0.036, -0.038, -0.04, -0.042, -0.044, -0.046, -0.048, -0.049, -0.05, -0.05, -0.049, -0.049, -0.049, -0.049, -0.048, -0.047, -0.046, -0.045, -0.044, -0.044, -0.042, -0.04, -0.038, -0.036, -0.034, -0.031, -0.027, -0.022, -0.013, -0.004, 0.003, 0.01, 0.016, 0.022, 0.026, 0.029, 0.032, 0.034, 0.036, 0.038, 0.039, 0.041, 0.043, 0.045, 0.047, 0.052, 0.054, 0.051, 0.044, 0.037, 0.027, 0.02, 0.01, -0.004, -0.018, -0.028, -0.036, -0.043, -0.048, -0.054, -0.062, -0.067, -0.071, -0.075, -0.078, -0.079, -0.078, -0.075, -0.071, -0.066, -0.048, -0.01, 0.048, 0.132, 0.245, 0.387, 0.529, 0.621, 0.628, 0.566, 0.39, 0.149, -0.084, -0.253, -0.314, -0.288, -0.21, -0.132, -0.1, -0.09, -0.085, -0.083, -0.083, -0.083, -0.083, -0.084, -0.084, -0.084, -0.08, -0.072, -0.067, -0.063, -0.06, -0.058, -0.055, -0.051, -0.049, -0.046, -0.045, -0.044, -0.043, -0.042, -0.04, -0.039, -0.038, -0.037, -0.036, -0.034, -0.033, -0.031, -0.029, -0.027, -0.025, -0.021, -0.015, -0.011, -0.006, -0.001, 0.004, 0.014, 0.025, 0.035, 0.043, 0.051, 0.057, 0.065, 0.075, 0.085, 0.092, 0.098, 0.102, 0.107, 0.111, 0.115, 0.118, 0.121, 0.123, 0.126, 0.127, 0.128, 0.128, 0.128, 0.126, 0.125, 0.122, 0.119, 0.113, 0.098, 0.083, 0.066, 0.051, 0.04, 0.031, 0.019, 0.002, -0.011, -0.021, -0.026, -0.027, -0.028, -0.028, -0.029, -0.029, -0.03, -0.03, -0.031, -0.032, -0.032, -0.033, -0.033, -0.033, -0.033, -0.033, -0.032, -0.032, -0.032, -0.031, -0.031, -0.031, -0.031, -0.031, -0.03, -0.029, -0.029, -0.028, -0.027, -0.026, -0.024, -0.023, -0.02, -0.018, -0.016, -0.014, -0.012, -0.006, -0.001, 0.0, 0.001, 0.002, 0.002, 0.002, 0.002, 0.002, 0.002, 0.003, 0.003, 0.003, 0.003, 0.003, 0.003, 0.002, 0.001, 0.0, 0.0, -0.001, -0.002, -0.002, -0.002, -0.003, -0.003, -0.004, -0.004, -0.004, -0.004, -0.005, -0.005, -0.006, -0.007, -0.008, -0.008, -0.008, -0.008, -0.007, -0.007, -0.005, -0.003, -0.001, 0.0, 0.003, 0.005, 0.008, 0.013, 0.018, 0.024, 0.028, 0.033, 0.04, 0.051, 0.061, 0.067, 0.071, 0.074, 0.077, 0.078, 0.079, 0.079, 0.078, 0.077, 0.075, 0.071, 0.068, 0.061, 0.046, 0.033, 0.024, 0.013, 0.0, -0.017, -0.025, -0.029, -0.031, -0.033, -0.035, -0.036, -0.038, -0.039, -0.04, -0.041, -0.042, -0.045, -0.049, -0.038, -0.005, 0.051, 0.132, 0.241, 0.375, 0.511, 0.618, 0.648, 0.587, 0.427, 0.206, -0.015, -0.191, -0.258, -0.262, -0.211, -0.146, -0.107, -0.092, -0.091, -0.094, -0.096, -0.097, -0.099, -0.1, -0.1, -0.1, -0.1, -0.1, -0.099, -0.098, -0.097, -0.094, -0.091, -0.088, -0.086, -0.083, -0.079, -0.076, -0.074, -0.072, -0.07, -0.069, -0.067, -0.066, -0.064, -0.063, -0.061, -0.06, -0.059, -0.057, -0.055, -0.053, -0.051, -0.048, -0.044, -0.04, -0.034, -0.027, -0.022, -0.017, -0.01, -0.001, 0.008, 0.016, 0.024, 0.031, 0.037, 0.043, 0.05, 0.056, 0.062, 0.065, 0.069, 0.071, 0.073, 0.075, 0.075, 0.073, 0.071, 0.067, 0.063, 0.057, 0.047, 0.039, 0.033, 0.027, 0.02, 0.012, 0.0, -0.017, -0.027, -0.033, -0.038, -0.045, -0.052, -0.057, -0.06, -0.064, -0.067, -0.07, -0.072, -0.073, -0.074, -0.075, -0.075, -0.076, -0.077, -0.078, -0.078, -0.079, -0.08, -0.081, -0.082, -0.082, -0.081, -0.079, -0.077, -0.075, -0.073, -0.072, -0.07, -0.069, -0.067, -0.065, -0.064, -0.062, -0.061, -0.06, -0.058, -0.056, -0.054, -0.053, -0.051, -0.048, -0.045, -0.043, -0.041, -0.04, -0.039, -0.039, -0.039, -0.039, -0.039, -0.039, -0.039, -0.039, -0.04, -0.04, -0.04, -0.04, -0.04, -0.04, -0.04, -0.041, -0.042, -0.043, -0.043, -0.044, -0.039, -0.03, -0.024, -0.018, -0.013, -0.009, -0.007, -0.005, -0.003, -0.002, 0.0, 0.0, 0.001, 0.003, 0.004, 0.006, 0.008, 0.01, 0.013, 0.018, 0.024, 0.031, 0.037, 0.043, 0.05, 0.056, 0.063, 0.069, 0.075, 0.081, 0.087, 0.091, 0.095, 0.098, 0.1, 0.1, 0.098, 0.093, 0.088, 0.078, 0.063, 0.051, 0.042, 0.033, 0.024, 0.015, 0.008, 0.004, 0.002, 0.0, -0.002, -0.005, -0.008, -0.012, -0.018, -0.027, -0.03, -0.034, -0.037, -0.028, 0.0, 0.053, 0.133, 0.239, 0.368, 0.515, 0.653, 0.719, 0.713, 0.611, 0.407, 0.161, -0.058, -0.186, -0.219, -0.17, -0.092, -0.037, -0.019, -0.027, -0.033, -0.038, -0.041, -0.042, -0.041, -0.038, -0.035, -0.033, -0.032, -0.031, -0.03, -0.028, -0.027, -0.025, -0.022, -0.02, -0.017, -0.014, -0.012, -0.01, -0.009, -0.008, -0.006, -0.005, -0.003, -0.001, 0.0, 0.001, 0.003, 0.005, 0.006, 0.008, 0.009, 0.01, 0.012, 0.014, 0.018, 0.026, 0.032, 0.037, 0.043, 0.051, 0.059, 0.066, 0.071, 0.076, 0.081, 0.086, 0.095, 0.108, 0.116, 0.122, 0.125, 0.127, 0.129, 0.13, 0.132, 0.133, 0.134, 0.133, 0.131, 0.128, 0.124, 0.118, 0.11, 0.099, 0.085, 0.069, 0.056, 0.046, 0.038, 0.027, 0.017, 0.007, 0.0, -0.005, -0.008, -0.011, -0.016, -0.021, -0.026, -0.029, -0.033, -0.036, -0.04, -0.042, -0.043, -0.043, -0.042, -0.041, -0.039, -0.038, -0.036, -0.032, -0.037, -0.043, -0.047, -0.05, -0.049, -0.047, -0.046, -0.044, -0.043, -0.042, -0.041, -0.041, -0.041, -0.041, -0.041, -0.041, -0.041, -0.042, -0.044, -0.044, -0.043, -0.04, -0.038, -0.036, -0.036, -0.035, -0.034, -0.032, -0.031, -0.029, -0.029, -0.029, -0.03, -0.031, -0.032, -0.034, -0.036, -0.039, -0.042, -0.044, -0.046, -0.047, -0.049, -0.051, -0.053, -0.054, -0.056, -0.057, -0.058, -0.059, -0.06, -0.06, -0.06, -0.06, -0.059, -0.057, -0.056, -0.055, -0.053, -0.051, -0.049, -0.046, -0.043, -0.037, -0.031, -0.026, -0.021, -0.016, -0.01, -0.004, 0.001, 0.007, 0.013, 0.019, 0.024, 0.028, 0.031, 0.034, 0.036, 0.036, 0.034, 0.032, 0.027, 0.02, 0.007, -0.006, -0.019, -0.029, -0.035, -0.041, -0.047, -0.056, -0.07, -0.08, -0.085, -0.088, -0.091, -0.094, -0.095, -0.097, -0.1, -0.104, -0.106, -0.103, -0.094, -0.068, -0.02, 0.061, 0.174, 0.315, 0.47, 0.605, 0.676, 0.653, 0.523, 0.31, 0.06, -0.153, -0.265, -0.28, -0.244, -0.165, -0.129, -0.116, -0.114, -0.117, -0.118, -0.119, -0.12, -0.121, -0.118, -0.113, -0.108, -0.105, -0.102, -0.1, -0.098, -0.095, -0.093, -0.09, -0.088, -0.086, -0.084, -0.082, -0.08, -0.078, -0.075, -0.073, -0.07, -0.068, -0.065, -0.062, -0.057, -0.05, -0.043, -0.035, -0.029, -0.023, -0.018, -0.014, -0.01, -0.006, -0.003, 0.0, 0.004, 0.009, 0.016, 0.025, 0.036, 0.046, 0.057, 0.064, 0.07, 0.074, 0.079, 0.085, 0.092, 0.099, 0.106, 0.112, 0.117, 0.122, 0.126, 0.131, 0.134, 0.136, 0.135, 0.131, 0.127, 0.12, 0.111, 0.103, 0.093, 0.081, 0.067, 0.054, 0.042, 0.033, 0.022, 0.011, 0.003, -0.003, -0.009, -0.011, -0.013, -0.015, -0.016, -0.017, -0.018, -0.019, -0.02, -0.021, -0.022, -0.022, -0.023, -0.023, -0.023, -0.023, -0.022, -0.021, -0.02, -0.018, -0.017, -0.01],
                dataBuffer: [],
                tagPos: [
                    {type: '.', position: 2000},
                    {type: 'P', position: 4600},
                    {type: 'V', position: 7954},
                    {type: '.', position: 10000},
                    {type: 'V', position: 11547},
                    {type: 'S', position: 22000},
                    {type: 'F', position: 26000},
                    {type: 'V', position: 30000},
                    {type: 'V', position: 32000},
                    {type: 'S', position: 36000},
                    {type: '.', position: 42000},
                    {type: '.', position: 46000},
                    {type: 'V', position: 162000},
                    {type: 'P', position: 182000},
                ],
                rhythm: [
                    {type: 'AFIB', begin: 4600, end: 7954},
                    {type: 'AFIB', begin: 162000, end: 182000},
                ],
                samplingFrequency: 512,//采样频率
                currentUpdateIndex: -1,//当前心拍索引
                currentRhythmIndex: -1,//当前节律索引
                viewBeatsState: false,//上下节拍导航启用状态
                viewSimilarBeatsState: false,//上下同类节拍导航启用状态
                similarBeatsType: '',//当前同类心拍的类型
                isWA: false,//判断当前按键是否为'W'或'A'
                isWS: false,//判断当前按键是否为'W'或'S'
                isPrevSimilarKey: false,//按键','
                isNextSimilarKey: false,//按键'.'
                isSlash: false,//按键'/'状态
                barColor: "rgba(58, 204, 22, 0.5)",
                y_start_poses: {
                    '5': this.createYstartPoses(8),
                    '10': this.createYstartPoses(6),
                    '20': this.createYstartPoses(3)
                },
                viewRhythmState: false,//上下节律启用状态
                viewRhythmEndState: false,//是否查看节律结束位置
                scrollStartTime: 0,
                scrollEndTime: 0,//设置滚动开始结束的时间，防止滚动过快导致浏览器崩溃
                pageRows: {
                    '5': 8,
                    '10': 6,
                    '20': 3
                },
                currentPageIndex: 0,//当前页数
                pageStartPointIndex: 0,//当前页第一个点的索引
                offsetRow: 0,//上下跳行偏移的行数
                ecgStartTime: '2018/08/28 00:00:00',
                blockIndex:160
            }
        },
        computed: {
            ...mapState('ecgView', {
                add: state => state.gainSelected,
                rhythmTypeSelected: state => state.rhythmTypeSelected
            }),
            viewState: function () {
                return this.viewBeatsState || this.viewRhythmState
            },
            pagePointsSum: function () {//根据增益计算每页心电的总点数,滚动翻页需要它
                return (this.samplingFrequency * 8) * (this.pageRows[this.add])
            },
            pointsRow: function () {
                return this.samplingFrequency * 8
            },
            zeroArr:function () {
                return new Array(30720).fill(0);
            }
        },
        watch: {
            add: function (add) {
                this.initCanvas({
                    y_start_pos: this.y_start_poses[add],
                    data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                });
            },
            viewState: function (viewState) {
                if (!viewState) {
                    document.getElementById('ecg').addEventListener('mousewheel', this.onMouseWheel);
                    document.getElementById('ecg').addEventListener('DOMMouseScroll', this.onMouseWheel);
                    $(document).on('keyup', this.scrollEcgRow);
                } else {
                    document.getElementById('ecg').removeEventListener('mousewheel', this.onMouseWheel);
                    document.getElementById('ecg').removeEventListener('DOMMouseScroll', this.onMouseWheel);
                    $(document).off('keyup', this.scrollEcgRow);
                }
            },
            rhythmTypeSelected: function (rhythmTypeSelected) {
                if (this.viewRhythmState) {
                    if (rhythmTypeSelected !== '') {
                        this.rhythm[this.currentRhythmIndex].type = rhythmTypeSelected;
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                }
            }
        },
        methods: {
            ...mapMutations('ecgView', [
                'changeRhythmTypeSelected'
            ]),
            //===============================================//
            formatData(originalData){
                let data=[];
                for (let blockIndex=this.blockIndex; blockIndex < this.blockIndex+30; blockIndex++) {
                    let flag=false;
                    for (let i = 0; i < originalData.length; i++) {
                        if (originalData[i].block_index === blockIndex ) {
                            data = data.concat(originalData[i].data);
                            flag=true;
                        }
                    }
                    if(!flag){
                        data=data.concat(this.zeroArr);
                    }
                }
                return data
            },
            createYstartPoses(num) {
                let arr = [];
                let start = 0;
                for (let i = 0; i < num; i++) {
                    arr.push(start);
                    if (num === 8) {
                        start += 70
                    } else if (num === 6) {
                        start += 100
                    } else {
                        start += 200
                    }
                }
                return arr;
            },
            drawMediumGrid(c_canvas, x_pos, x_end_pos, y_start_pos, y_end_pos) {
                let context = c_canvas.getContext("2d");
                context.strokeStyle = "#ccc";
                context.strokeWidth = 1;
                context.beginPath();
                for (let x = x_pos; x <= x_end_pos; x += 25) {
                    context.moveTo(x + 0.5, y_start_pos + 0.5);
                    context.lineTo(x + 0.5, y_end_pos - 0.5);
                }
                for (let y = y_start_pos; y <= y_end_pos; y += 25) {
                    context.moveTo(x_pos + 0.5, y + 0.5);
                    context.lineTo(x_end_pos, y + 0.5);
                }
                context.stroke();
                context.closePath();
            },
            drawSmallGrid(c_canvas, x_pos, x_end_pos, y_start_pos, y_end_pos) {
                let context = c_canvas.getContext("2d");
                context.strokeStyle = "#ededed";
                context.strokeWidth = 1;
                context.beginPath();
                for (let x = x_pos; x <= x_end_pos; x += 5) {
                    context.moveTo(x + 0.5, y_start_pos + 0.5);
                    context.lineTo(x + 0.5, y_end_pos - 0.5);
                }
                for (let y = y_start_pos; y <= y_end_pos; y += 5) {
                    context.moveTo(x_pos + 0.5, y + 0.5);
                    context.lineTo(x_end_pos, y + 0.5);
                }
                context.stroke();
                context.closePath();
            },
            drawHr(c_canvas,averageHeart){
                let context = c_canvas.getContext("2d");
                context.fillStyle = '#4650e1';
                context.font = "10pt Calibri";
                context.fillText(`HR: ${averageHeart} bpm`, 960, 25);
            },
            drawTags(c_canvas, x_pos, x_end_pos, y_start_pos, tagData, frequency) {
                tagData = tagData.filter(e => {
                    return e.position < this.pageStartPointIndex + this.pagePointsSum
                        && e.position >= this.pageStartPointIndex
                });
                if (tagData.length === 0) {
                    return;
                }
                let context = c_canvas.getContext("2d");
                context.fillStyle = '#4650e1';
                context.font = "10pt Calibri";
                tagData.map(item => {
                    let index = parseInt((item.position - this.offsetRow * this.pointsRow) / frequency);
                    let xPosition = (item.position % this.pagePointsSum % frequency) / frequency * (x_end_pos - x_pos) + x_pos - 3;
                    let yPosition = y_start_pos[index] + 25;
                    if(item.useReportState){
                        context.fillStyle = '#e13644';
                    }else {
                        context.fillStyle = '#4650e1';
                    }
                    context.fillText(item.type, xPosition, yPosition);
                    if (item.deleteState) {
                        context.beginPath();
                        context.moveTo(xPosition - 2, yPosition - 4);
                        context.lineTo(xPosition + 10, yPosition - 4);
                        context.stroke();
                        context.closePath();
                    }
                });
            },
            //画节律异常的起始和结束的标识
            drawRhythmMark(x_pos, x_end_pos, y_start_pos, frequency, y_height, context, position, type, deleteState, end,useReportState) {
                let index = parseInt((position - this.offsetRow * this.pointsRow) / frequency);
                let xPosition = (position % this.pagePointsSum % frequency) / frequency * (x_end_pos - x_pos) + x_pos - 8;
                let yPosition = y_start_pos[index] + y_height - 45;
                context.fillStyle = useReportState?'#e13644':'#000';
                if (!end) {
                    context.fillText(`(${type}`, xPosition, yPosition);
                } else {
                    context.fillText(`${type})`, xPosition, yPosition);
                }
                if (deleteState) {
                    context.beginPath();
                    context.moveTo(xPosition - 2, yPosition - 4);
                    context.lineTo(xPosition + 23, yPosition - 4);
                    context.stroke();
                    context.closePath();
                }
            },
            drawRyhthm(c_canvas, x_pos, x_end_pos, y_start_pos, rhythmData, frequency, y_height) {
                let context = c_canvas.getContext("2d");
                context.font = "10pt Calibri";
                rhythmData.map(item => {
                    //                    开始节律标志
                    if (item.begin >= this.pageStartPointIndex && item.begin < this.pageStartPointIndex + this.pagePointsSum) {
                        this.drawRhythmMark(x_pos, x_end_pos, y_start_pos, frequency, y_height,
                            context, item.begin, item.type, item.deleteState, false,item.useReportState);
                    }

                    //                    结束节律标志
                    if (item.end >= this.pageStartPointIndex && item.end < this.pageStartPointIndex + this.pagePointsSum) {
                        this.drawRhythmMark(x_pos, x_end_pos, y_start_pos, frequency, y_height,
                            context, item.end, item.type, item.deleteState, true,item.useReportState);
                    }
                });
            },
            //画节拍导航的柱子
            drawBeatsBar(c_canvas, x_pos, x_end_pos, y_start_pos, tagData, frequency, barColor) {
                let context = c_canvas.getContext("2d");
                context.fillStyle = barColor;
                let index = parseInt((tagData[this.currentUpdateIndex].position - this.offsetRow * this.pointsRow) / frequency);
                let xPosition = (tagData[this.currentUpdateIndex].position % this.pagePointsSum % frequency) / frequency * (x_end_pos - x_pos) + x_pos - 12.5;
                let yPosition = y_start_pos[index] + 10;
//                context.fillRect(xPosition, yPosition, 25, this.add * 10);
                context.fillRect(xPosition, yPosition, 25, 100);
            },
            //画节律导航的柱子
            drawRhythmBar(c_canvas, x_pos, x_end_pos, y_start_pos, rhythm, frequency, barColor, viewRhythmEndState) {
                let context = c_canvas.getContext("2d");
                context.fillStyle = barColor;
                let index = 0;
                let xPosition = 0;
                if (viewRhythmEndState) {
                    index = parseInt((rhythm[this.currentRhythmIndex].end - this.offsetRow * this.pointsRow) / frequency);
                    xPosition = rhythm[this.currentRhythmIndex].end % frequency / frequency * (x_end_pos - x_pos) + x_pos - 12.5;
                } else {
                    index = parseInt((rhythm[this.currentRhythmIndex].begin - this.offsetRow * this.pointsRow) / frequency);
                    xPosition = rhythm[this.currentRhythmIndex].begin % frequency / frequency * (x_end_pos - x_pos) + x_pos - 12.5;
                }
                let yPosition = y_start_pos[index] + 10;
//                context.fillRect(xPosition, yPosition, 25, this.add * 10);
                context.fillRect(xPosition, yPosition, 25, 100);
            },
            //计算上下正常和异常节拍位置
            calcAbnormalBar(tagData) {
                let flag;
                let end;
                let originalPosition = this.currentUpdateIndex;
                if (this.isWA) {
                    end = function (i) {
                        return i >= 0
                    };
                    flag = -1;
                } else {
                    end = function (i) {
                        return i < tagData.length;
                    };
                    flag = 1;
                }
                for (this.currentUpdateIndex = this.currentUpdateIndex + flag; end(this.currentUpdateIndex); this.currentUpdateIndex += flag) {
                    if (this.isWS) {
                        if (tagData[this.currentUpdateIndex].type !== '.') {
                            break;
                        }
                    } else {
                        break;
                    }
                }
                if (this.currentUpdateIndex < 0) {
                    this.currentUpdateIndex = 0;
                    if (this.isWS && tagData[this.currentUpdateIndex].type === '.') {
                        if (originalPosition === -1) {
                            this.currentUpdateIndex = 0;
                        } else {
                            this.currentUpdateIndex = originalPosition;
                        }
                    }
                } else if (this.currentUpdateIndex >= tagData.length) {
                    this.currentUpdateIndex = tagData.length - 1;
                    if (this.isWS && tagData[this.currentUpdateIndex].type === '.') {
                        this.currentUpdateIndex = originalPosition;
                    }
                }
                this.calcJumpNewPage(tagData);
            },
            //计算同类节拍位置
            calcSimilarBar(tagData) {
                if (!this.isPrevSimilarKey && !this.isNextSimilarKey) {
                    return;
                }
                let flag;
                let end;
                let originalPosition = this.currentUpdateIndex;
                if (this.isPrevSimilarKey) {
                    end = function (i) {
                        return i >= 0
                    };
                    flag = -1;
                } else {
                    end = function (i) {
                        return i < tagData.length;
                    };
                    flag = 1;
                }
                for (this.currentUpdateIndex = this.currentUpdateIndex + flag; end(this.currentUpdateIndex); this.currentUpdateIndex += flag) {
                    if (tagData[this.currentUpdateIndex].type === this.similarBeatsType) {
                        break;
                    }
                }
                if (this.currentUpdateIndex < 0) {
                    this.currentUpdateIndex = 0;
                    if (tagData[this.currentUpdateIndex].type !== this.similarBeatsType) {
                        this.currentUpdateIndex = originalPosition;
                    }
                } else if (this.currentUpdateIndex >= tagData.length) {
                    this.currentUpdateIndex = tagData.length - 1;
                    if (tagData[this.currentUpdateIndex].type !== this.similarBeatsType) {
                        this.currentUpdateIndex = originalPosition;
                    }
                }
                this.calcJumpNewPage(tagData);
                this.isPrevSimilarKey = false;
                this.isNextSimilarKey = false;
            },
            //计算上下正常,异常和同类心拍的位置
            calcBeatBar(tagData) {
                if (this.viewBeatsState) {
                    if (this.isSlash) {
                        this.isSlash = false;
                    } else {
                        if (!this.viewSimilarBeatsState) {
                            this.barColor = 'rgba(58, 204, 22, 0.5)';//切为节拍导航则标识柱变回绿色
                            this.calcAbnormalBar(tagData);
                        } else {
                            this.barColor = 'rgba(204, 189, 87, 0.5)';
                            this.calcSimilarBar(tagData);
                        }
                    }
                }
            },
            //心拍导航跳到新页
            calcJumpNewPage(tagData) {
                if ((tagData[this.currentUpdateIndex].position >= this.pageStartPointIndex + this.pagePointsSum)
                    || (tagData[this.currentUpdateIndex].position < this.pageStartPointIndex)) {
                    this.offsetRow = Math.floor(tagData[this.currentUpdateIndex].position / this.pointsRow);
                    this.pageStartPointIndex = this.offsetRow * this.pointsRow;
                }
            },
            //心律导航跳到新页
            calcRhythmJump(rhythmData, rhythmEndState) {
                if (rhythmEndState) {
                    if (rhythmData[this.currentRhythmIndex].end >= this.pageStartPointIndex + this.pagePointsSum
                        || rhythmData[this.currentRhythmIndex].end < this.pageStartPointIndex) {
                        this.offsetRow = Math.floor(rhythmData[this.currentRhythmIndex].end / this.pointsRow);
                        this.pageStartPointIndex = this.offsetRow * this.pointsRow;
                    }
                } else {
                    if (rhythmData[this.currentRhythmIndex].begin >= this.pageStartPointIndex + this.pagePointsSum
                        || rhythmData[this.currentRhythmIndex].begin < this.pageStartPointIndex) {
                        this.offsetRow = Math.floor(rhythmData[this.currentRhythmIndex].begin / this.pointsRow);
                        this.pageStartPointIndex = this.offsetRow * this.pointsRow;
                    }
                }

            },
            //计算每行心电起始时间
            calcEcgTime(index) {
                let startDate = new Date(this.ecgStartTime);
                startDate.setSeconds(startDate.getSeconds() + Math.floor(index / this.samplingFrequency));
                let hour = startDate.getHours() < 10 ? '0' + startDate.getHours() : startDate.getHours();
                let minute = startDate.getMinutes() < 10 ? '0' + startDate.getMinutes() : startDate.getMinutes();
                let second = startDate.getSeconds() < 10 ? '0' + startDate.getSeconds() : startDate.getSeconds();
                return hour + ':' + minute + ':' + second;
            },
            drawEcg(c_canvas, data, x_pos, x_end_pos, y_start_pos, frequency, add, y_height) {
                let context = c_canvas.getContext("2d");
                context.strokeStyle = "#000";
                context.fillStyle = '#4650e1';
                context.font = "10pt Calibri";
                context.strokeWidth = 1;
                context.beginPath();
                let length = data.length;
                context.moveTo(x_pos, y_height / 2 + y_start_pos[0]);
                for (let i = 0; i < length; i++) {
                    let index = parseInt(i / frequency);
                    if (index > y_start_pos.length - 1) {
                        break;
                    }
                    let xPosition = x_pos + i % frequency / frequency * (x_end_pos - x_pos);
                    let yPosition = y_start_pos[index] - data[i]/2000 * add * 5 + y_height / 2;
                    if (i % frequency === 0) {
                        context.fillText(`${this.calcEcgTime(i + this.offsetRow * this.pointsRow)}`, xPosition - 60, yPosition);
                        context.moveTo(xPosition, yPosition);
                    } else {
                        context.lineTo(xPosition, yPosition);
                    }
                }
                context.stroke();
                context.closePath();
                return;
            },
            //查看所有节拍
            viewBeats(event) {
                if (event.keyCode === 65) {
                    if (this.viewRhythmState) {//如果当前是节律导航则w,s,a,d键失效
                        return
                    }
                    this.isWA = true;
                    this.isWS = false;
                    this.viewBeatsState = true;
                    this.viewRhythmState = false;
                    this.calcBeatBar(this.tagPos);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                } else if (event.keyCode === 68) {
                    if (this.viewRhythmState) {
                        return
                    }
                    this.isWA = false;
                    this.isWS = false;
                    this.viewBeatsState = true;
                    this.viewRhythmState = false;
                    this.calcBeatBar(this.tagPos);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });

                }
            },
            //查看异常节拍
            viewAbnormal(event) {
                if (event.keyCode === 87) {
                    if (this.viewRhythmState) {
                        return
                    }
                    this.isWA = true;
                    this.isWS = true;
                    this.viewBeatsState = true;
                    this.viewRhythmState = false;
                    this.calcBeatBar(this.tagPos);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                } else if (event.keyCode === 83) {
                    if (this.viewRhythmState) {
                        return
                    }
                    this.isWA = false;
                    this.isWS = true;
                    this.viewBeatsState = true;
                    this.viewRhythmState = false;
                    this.calcBeatBar(this.tagPos);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                }
            },
            //查看同类节拍
            viewSimilarBeats(event) {
                if (event.keyCode === 191) {//'/'键
                    if (this.viewBeatsState) {
                        this.viewSimilarBeatsState = !this.viewSimilarBeatsState;//再次点击可取消心拍导航
                        this.similarBeatsType = this.tagPos[this.currentUpdateIndex].type;
                        if (this.viewSimilarBeatsState) {
                            this.barColor = 'rgba(204, 189, 87, 0.5)';
                        } else {
                            this.barColor = 'rgba(58, 204, 22, 0.5)';
                        }
                        this.isSlash = true;
                        this.calcBeatBar(this.tagPos);
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                } else if (event.keyCode === 188) {//','键
                    this.isPrevSimilarKey = true;
                    this.isNextSimilarKey = false;
                    this.calcBeatBar(this.tagPos);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                } else if (event.keyCode === 190) {//'.'键
                    this.isNextSimilarKey = true;
                    this.isPrevSimilarKey = false;
                    this.calcBeatBar(this.tagPos);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                }
            },
            viewRhythm(event) {
                if (event.keyCode === 81) {//'Q'键
                    if(this.viewBeatsState){
                        return
                    }
                    this.viewRhythmState = true;
                    this.viewBeatsState = false;
                    this.viewRhythmEndState = false;
                    if (this.currentRhythmIndex > 0) {
                        this.currentRhythmIndex--;
                    } else {
                        this.currentRhythmIndex = 0;
                    }
                    this.barColor = 'rgba(34, 38, 204, 0.5)';
                    this.calcRhythmJump(this.rhythm);
                    this.changeRhythmTypeSelected('');
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                } else if (event.keyCode === 69) {//'E'键
                    if(this.viewBeatsState){
                        return
                    }
                    this.viewRhythmState = true;
                    this.viewBeatsState = false;
                    this.viewRhythmEndState = false;
                    if (this.currentRhythmIndex < this.rhythm.length - 1) {
                        this.currentRhythmIndex++;
                    }
                    this.barColor = 'rgba(34, 38, 204, 0.5)';
                    console.log(this.currentRhythmIndex);
                    this.calcRhythmJump(this.rhythm);
                    this.changeRhythmTypeSelected('');
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                } else if (event.keyCode === 82) {//'R'键
                    if (this.viewRhythmState) {
                        this.viewRhythmEndState = true;
                        this.calcRhythmJump(this.rhythm, this.viewRhythmEndState);
                        this.changeRhythmTypeSelected('');
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                }
            },
            updateBeatType(event) {
                if (this.viewBeatsState) {
                    switch (event.keyCode) {
                        case 49:
                            this.tagPos[this.currentUpdateIndex].type = '.';
                            this.initCanvas({
                                y_start_pos: this.y_start_poses[this.add],
                                data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                            });
                            break;
                        case 50:
                            this.tagPos[this.currentUpdateIndex].type = 'V';
                            this.initCanvas({
                                y_start_pos: this.y_start_poses[this.add],
                                data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                            });
                            break;
                        case 51:
                            this.tagPos[this.currentUpdateIndex].type = 'S';
                            this.initCanvas({
                                y_start_pos: this.y_start_poses[this.add],
                                data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                            });
                            break;
                        case 52:
                            this.tagPos[this.currentUpdateIndex].type = 'Q';
                            this.initCanvas({
                                y_start_pos: this.y_start_poses[this.add],
                                data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                            });
                            break;
                        case 53:
                            this.tagPos[this.currentUpdateIndex].type = 'F';
                            this.initCanvas({
                                y_start_pos: this.y_start_poses[this.add],
                                data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                            });
                            break;
                    }
                }
            },
            deleteBeat(event) {
                if (this.viewBeatsState) {
                    if (event.keyCode === 46) {//按'Delete'键
                        if(!this.tagPos[this.currentUpdateIndex].useReportState){//当前事件不处于被选中为报告用图状态才能删除
                            this.tagPos[this.currentUpdateIndex].deleteState = !this.tagPos[this.currentUpdateIndex].deleteState;
                        }
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                }
            },
            deleteRhythm(event) {
                if (this.viewRhythmState) {
                    if (event.keyCode === 46) {//按'Delete'键
                        if(!this.rhythm[this.currentRhythmIndex].useReportState){//当前事件不处于被选中为报告用图状态才能删除
                            this.rhythm[this.currentRhythmIndex].deleteState = !this.rhythm[this.currentRhythmIndex].deleteState;
                        }
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                }
            },
            //选为报告用图
            useReport(event){
                if(event.keyCode===32){//'space键'
                    if(this.viewBeatsState){
                        if(!this.tagPos[this.currentUpdateIndex].deleteState){//当前事件不处于删除状态才能选中为报告用图
                            this.tagPos[this.currentUpdateIndex].useReportState=!this.tagPos[this.currentUpdateIndex].useReportState
                        }
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                    if(this.viewRhythmState){
                        if(!this.rhythm[this.currentRhythmIndex].deleteState){//当前事件不处于删除状态才能选中为报告用图
                            this.rhythm[this.currentRhythmIndex].useReportState=!this.rhythm[this.currentRhythmIndex].useReportState;
                        }
                        this.initCanvas({
                            y_start_pos: this.y_start_poses[this.add],
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                        });
                    }
                }
            },
            //Esc键取消当前导航状态
            reset(event) {
                if (event.keyCode === 27) {
                    if(this.viewBeatsState){
                        this.updateTagRhythmIndex(this.tagPos, this.rhythm);//保证再次按w,a,s,d时，心拍从当前页或者离当前页最近的地方开始
                    }
                    if(this.viewRhythmState){
                        this.updateTagRhythmIndex(this.tagPos, this.rhythm);//保证再次按q,e时，心律异常从当前页或者离当前页最近的地方开始
                    }
                    this.viewBeatsState = false;
                    this.viewRhythmState = false;
                    this.viewSimilarBeatsState = false;
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                }
            },
            //更新当前tag,rhythm的index
            updateTagRhythmIndex(tagData, rhythmData) {
                for (let i = 0, len = tagData.length; i < len; i++) {//每滚动一次就会更新当前导航tag的index
                    if (tagData[i].position >= this.pageStartPointIndex) {
                        this.currentUpdateIndex = i - 1;
                        break;
                    }
                }
                for (let i = 0, len = rhythmData.length; i < len; i++) {//每滚动一次就会更新当前导航rhythm的index
                    if (rhythmData[i].begin >= this.pageStartPointIndex) {
                        this.currentRhythmIndex = i - 1;
                        break;
                    }
                }
            },
            updateData() {
                if (this.pageStartPointIndex >= this.data.length - this.pagePointsSum) {
                    console.log('该加载新的数据了');
                    this.data = this.data.slice(this.pageStartPointIndex).concat(this.dataBuffer);//更新数据块data
                    this.pageStartPointIndex = 0;
                    this.offsetRow = 0;
                }
            },
            onMouseWheel(event) {
                let down = true; // 定义一个标志，当滚轮向下滚时，执行一些操作
                down = event.wheelDelta ? event.wheelDelta < 0 : event.detail > 0;
                this.scrollStartTime = new Date().getTime();
                if (this.scrollEndTime - this.scrollStartTime < -100) {//100ms内再次滚动不会重绘图形
                    if (down) {
                        this.offsetRow += this.pageRows[this.add];
                        this.pageStartPointIndex = this.offsetRow * this.pointsRow;
                        if (this.pageStartPointIndex >= this.data.length - 153600) {//暂定为提前5分钟加载新的数据
                            setTimeout(() => {
                                this.dataBuffer = this.data//模拟ajax请求
                            }, 30)
                        }
                        this.updateData();
                        console.log(this.pageStartPointIndex);
                        this.updateTagRhythmIndex(this.tagPos, this.rhythm);
                        this.initCanvas({
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum),
                            y_start_pos: this.y_start_poses[this.add]
                        });
                    } else {
                        this.offsetRow -= this.pageRows[this.add];
                        this.pageStartPointIndex = this.offsetRow * this.pointsRow;
                        if (this.pageStartPointIndex < 0) {
                            console.log('该加载新的数据了');
                            this.pageStartPointIndex = 0;
                            this.offsetRow = 0;
                        }
                        console.log(this.pageStartPointIndex);
                        this.updateTagRhythmIndex(this.tagPos, this.rhythm);
                        this.initCanvas({
                            data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum),
                            y_start_pos: this.y_start_poses[this.add]
                        });
                    }
                }
                this.scrollEndTime = new Date().getTime();
            },
            scrollEcgRow(event) {
                if (event.keyCode === 38) {
                    this.offsetRow--;
                    this.pageStartPointIndex = this.offsetRow * this.pointsRow;
                    if (this.pageStartPointIndex >= 0) {
                        console.log(this.pageStartPointIndex);
                    } else {
                        this.offsetRow = 0;
                        this.pageStartPointIndex = 0;
                        console.log('该加载新的数据了!');
                    }
                    this.updateTagRhythmIndex(this.tagPos, this.rhythm);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                } else if (event.keyCode === 40) {
                    this.offsetRow++;
                    this.pageStartPointIndex = this.offsetRow * this.pointsRow;

                    if (this.pageStartPointIndex >= this.data.length - 153600) {//暂定为提前5分钟加载新的数据
                        setTimeout(() => {
                            this.dataBuffer = this.data//模拟ajax请求
                        }, 30)
                    }

                    if (this.pageStartPointIndex < this.data.length - this.pagePointsSum) {
                        console.log(this.pageStartPointIndex);
                    } else {
                        console.log('该加载新的数据了!');
                        this.data = this.data.slice(this.pageStartPointIndex).concat(this.dataBuffer);//更新数据块data
                        this.offsetRow = 0;
                        this.pageStartPointIndex = 0;
                    }
                    this.updateTagRhythmIndex(this.tagPos, this.rhythm);
                    this.initCanvas({
                        y_start_pos: this.y_start_poses[this.add],
                        data: this.data.slice(this.pageStartPointIndex, this.pageStartPointIndex + this.pagePointsSum)
                    });
                }
            },
            drawGrid(c_canvas, options) {//组件的核心方法,重绘整个canvas
                let {data, x_start_pos, x_end_pos, y_start_pos, y_height, tagData, frequency, add, rhythm,averageHeart} = {...options};
                this.drawSmallGrid(c_canvas, x_start_pos, x_end_pos, 10, 610);
                this.drawMediumGrid(c_canvas, x_start_pos, x_end_pos, 10, 610);
                this.drawHr(c_canvas,averageHeart);
                if (this.viewBeatsState) {
                    this.drawBeatsBar(c_canvas, x_start_pos + 100, x_end_pos, y_start_pos, tagData, frequency, this.barColor);
                }
                if (this.viewRhythmState) {
                    this.drawRhythmBar(c_canvas, x_start_pos + 100, x_end_pos, y_start_pos, rhythm, frequency, this.barColor, this.viewRhythmEndState);
                }
                this.drawEcg(c_canvas, data, x_start_pos + 100, x_end_pos, y_start_pos, frequency, add, y_height);
                this.drawTags(c_canvas, x_start_pos + 100, x_end_pos, y_start_pos, tagData, frequency);
                //                绘制节律标志
                this.drawRyhthm(c_canvas, x_start_pos + 100, x_end_pos, y_start_pos, rhythm, frequency, y_height);

            },
            initCanvas(option = {}) {
                let c_canvas = document.getElementById('ecg');
                let options = {
                    data: this.data.slice(0, this.pagePointsSum),
                    frequency: this.samplingFrequency * 8,//每行心电的点数
                    tagData: this.tagPos,
                    rhythm: this.rhythm,
                    add: this.add,
                    x_start_pos: 40,
                    x_end_pos: 1040,
                    y_start_pos: this.createYstartPoses(6),
                    y_height: 150,
                    averageHeart:80
                };
                options = Object.assign(options, option);
                let context = c_canvas.getContext("2d");
                context.clearRect(0, 0, c_canvas.width, c_canvas.height);
                this.drawGrid(c_canvas, options);
            },
        },


        mounted() {
//            for (let i = 0; i < 6; i++) {
//                this.data = this.data.concat(this.data);
//            }
//            let self=this;
            API.getEcgData({
                report_id:'1',
                block_index:160,
                limit:30
            }).then((data) =>{
                console.log(data);
                this.data=this.formatData(data);
                console.log(this.data);
                this.initCanvas();
            });

            $(document).on('keyup', this.viewBeats);
            $(document).on('keyup', this.viewAbnormal);
            $(document).on('keyup', this.viewSimilarBeats);
            $(document).on('keyup', this.viewRhythm);
            $(document).on('keyup', this.reset);
            $(document).on('keyup', this.updateBeatType);
            $(document).on('keyup', this.deleteBeat);
            $(document).on('keyup', this.deleteRhythm);
            $(document).on('keyup',this.useReport);
            document.getElementById('ecg').addEventListener('mousewheel', this.onMouseWheel);
            document.getElementById('ecg').addEventListener('DOMMouseScroll', this.onMouseWheel);
            $(document).on('keyup', this.scrollEcgRow);
        },
        destroyed() {
            $(document).off('keyup');
            document.getElementById('ecg').removeEventListener('mousewheel', this.onMouseWheel);
            document.getElementById('ecg').removeEventListener('DOMMouseScroll', this.onMouseWheel);
        }
    }
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped lang="scss">
    body {
        /*color: rgba(204, 189, 87, 0.5)*/
    }
</style>
